<html>

<head>
    <title> Experiments </title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.css" 
    integrity="sha512-MKxcSu/LDtbIYHBNAWUQwfB3iVoG9xeMCm32QV5hZ/9lFaQZJVaXfz9aFa0IZExWzCpm7OWvp9zq9gVip/nLMg==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="css/my_styles.css" />


    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/moment.min.js"></script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


    <script src="js/fancy_slider.js"></script>
    <script src="js/merge_tooltips.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/wnumb/1.2.0/wNumb.min.js"></script>


</head>

<body>
    <div class="d-flex flex-column">
        <div class="row my-5">
            <div class="col-6 m-2">
                <div class="slider-box-handle slider-styled slider-hide  w-100" id="slider"></div>
            </div>
        </div>
        
    </div>
    

    <script>
        function filterPips(value, type) {
            var minute = value %60;
            switch(minute){
                case 0:
                    return 2
                break;
                case 30:
                    return 1;
                break;
                default:
                    return 0;
            }
        }

        $(document).ready(function(){
            var slider = document.getElementById("slider")
            noUiSlider.create(slider,{
                start: [100, 130, 200,230],
                connect: [false,true,false,true,false],
                behaviour: 'drag-all',
                range: {
                    'min': 0,
                    'max': 600
                },
                step:10,
                pips: {
                    mode: 'steps',
                    density: 10,
                    filter: filterPips,
                    format: wNumb({
                        decimals: 0,
                        edit: function(value){
                            console.log(value);
                            return moment("07:30","HH:mm").add(value,"minutes").format("HH:mm");
                        }
                        
                    })
                },
                tooltips:true
            });

            //mergeTooltips(slider, 5, ' - ');


            var activePips = [null, null];
            
            slider.noUiSlider.on('update', function (values, handle) {
                // Remove the active class from the current pip
                if (activePips[handle]) {
                    activePips[handle].classList.remove('active-pip');
                    
                }

                // Match the formatting for the pip
                var dataValue = Math.round(values[handle]);

                // Find the pip matching the value
                activePips[handle] = slider.querySelector('.noUi-value[data-value="' + dataValue + '"]');

                // Add the active class
                if (activePips[handle]) {
                    activePips[handle].classList.add('active-pip');
                }
            });

        })

    </script>
      
</body>

</html>

